<html>
  <head>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
      //socket io client
      var socket = io.connect('http://localhost');

      //on connetion, updates connection state and sends subscribe request
      socket.on('connect', function(data){
        setStatus('connected');
        socket.emit('subscribe', {channel:'notif'});
      });

      //when reconnection is attempted, updates status 
      socket.on('reconnecting', function(data){
        setStatus('reconnecting');
      });

      //on new message adds a new message to display
      socket.on('message', function (data) {
        var msg = "";
        if (data.channel) {
          msg += 'Channel:' + data.channel + ', ' + data.text; 
        } else {
          msg = data.text;
        }
      addMessage(msg);
      });

      //updates status to the status div
      function setStatus(msg) {
        $('#status').html('Connection Status : ' + msg);
      }

      //adds message to messages div
      function addMessage(msg) {
        var str = '<div class="message">' + msg + '</div><hr>';
        console.log(str)
        $('#messages').append(str)
}
    </script>
  </head>
  <body>
    <div id="status"></div><br><br>
    <div id="messages"></div>
  </body>
</html>
<!--
  <script src="/socket.io/socket.io.js"></script>
  <script>
  var socket = io('http://localhost');
  
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'dataw' });
  });

  // socket.emit('newbie', { amnesia: 'world' });

  socket.on('notification_from_server', function (data) {
    console.log(data);
  });
</script> -->

<!-- <script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io('http://localhost');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script> -->

<!-- <html>
    <head>
        <title>Push notification server</title>
    </head>
    <body>
        <time></time>
        <div id="container">Try to change your xml data to update this content</div>
	    
	    <script src="/socket.io/socket.io.js"></script>
	    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	    <script>
	    // creating a new websocket
	    var socket = io.connect('http://localhost');
	    // on every message recived we print the new datas inside the #container div
	    socket.on('notification', function (data) {
	        // convert the json string into a valid javascript object
	        var _data = JSON.parse(data);
	        $('#container').html(_data.test.sample);
	        $('time').html('Last Update:' + _data.time);
	    });
	    </script>
	    
    </body>
</html> -->